<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Design System Token Generator</title>
    <style>
        :root {
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc;
            --text-primary: #0f172a;
            --text-secondary: #64748b;
            --accent: #3b82f6;
            --border: #e2e8f0;
            --success: #10b981;
        }

        body.dark-mode {
            --bg-primary: #1a1a1a;
            --bg-secondary: #262626;
            --text-primary: #ececf1;
            --text-secondary: #9299a4;
            --accent: #5b9fff;
            --border: #3f3f46;
            --success: #10b981;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            padding: 2rem;
            line-height: 1.6;
            transition: background 0.3s, color 0.3s;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        header {
            margin-bottom: 3rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .header-controls {
            display: flex;
            gap: 1rem;
        }

        .dark-mode-toggle {
            padding: 0.75rem 1.5rem;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: opacity 0.2s;
        }

        .dark-mode-toggle:hover {
            opacity: 0.9;
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 2rem;
        }

        .card h2 {
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
            color: var(--text-primary);
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        input, select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            background: var(--bg-primary);
            color: var(--text-primary);
            font-size: 1rem;
        }

        .button-group {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        button {
            flex: 1;
            padding: 1rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        button:hover {
            opacity: 0.9;
        }

        .btn-primary {
            background: var(--accent);
            color: white;
        }

        .btn-secondary {
            background: var(--bg-primary);
            color: var(--text-primary);
            border: 1px solid var(--border);
        }

        .output-section {
            margin-bottom: 2rem;
        }

        .output-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
        }

        .output-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 2rem;
        }

        .output-card h3 {
            font-size: 1.25rem;
            margin-bottom: 1rem;
            color: var(--text-primary);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .copy-btn {
            padding: 0.5rem 1rem;
            background: var(--success);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 0.875rem;
            cursor: pointer;
            transition: opacity 0.2s;
        }

        .copy-btn:hover {
            opacity: 0.9;
        }

        pre {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1.5rem;
            overflow-x: auto;
            font-size: 0.875rem;
            line-height: 1.6;
        }

        code {
            color: var(--text-primary);
            font-family: 'Fira Code', 'Consolas', monospace;
        }

        .preview {
            margin-top: 2rem;
        }

        .preview h3 {
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .preview-item {
            padding: 1rem;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 8px;
            margin-bottom: 0.5rem;
        }

        @media (max-width: 1200px) {
            .output-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            .grid {
                grid-template-columns: 1fr;
            }

            body {
                padding: 1rem;
            }

            h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div>
                <h1>Design System Token Generator</h1>
                <p style="color: var(--text-secondary); margin-top: 0.5rem;">Generate Typography, Spacing, and Gap tokens</p>
            </div>
            <div class="header-controls">
                <button class="dark-mode-toggle" id="darkModeToggle">Toggle Dark Mode</button>
            </div>
        </header>

        <div class="grid">
            <div class="card">
                <h2>Configuration</h2>
                
                <div class="form-group">
                    <label>Viewport Min (px)</label>
                    <input type="number" id="viewportMin" value="320">
                </div>

                <div class="form-group">
                    <label>Viewport Max (px)</label>
                    <input type="number" id="viewportMax" value="1440">
                </div>

                <hr style="margin: 2rem 0; border: 0; border-top: 1px solid var(--border);">

                <h3 style="margin-bottom: 1rem;">Typography</h3>
                
                <div class="form-group">
                    <label>Base Size Min (rem)</label>
                    <input type="number" id="typeBaseMin" value="1.4" step="0.1">
                </div>

                <div class="form-group">
                    <label>Base Size Max (rem)</label>
                    <input type="number" id="typeBaseMax" value="1.6" step="0.1">
                </div>

                <div class="form-group">
                    <label>Ratio Mobile</label>
                    <input type="number" id="typeRatioMobile" value="1.125" step="0.001">
                </div>

                <div class="form-group">
                    <label>Ratio Desktop</label>
                    <input type="number" id="typeRatioDesktop" value="1.2" step="0.001">
                </div>

                <hr style="margin: 2rem 0; border: 0; border-top: 1px solid var(--border);">

                <h3 style="margin-bottom: 1rem;">Spacing</h3>

                <div class="form-group">
                    <label>Base Size Min (rem)</label>
                    <input type="number" id="spaceBaseMin" value="0.5" step="0.1">
                </div>

                <div class="form-group">
                    <label>Base Size Max (rem)</label>
                    <input type="number" id="spaceBaseMax" value="1.0" step="0.1">
                </div>

                <div class="form-group">
                    <label>Ratio</label>
                    <input type="number" id="spaceRatio" value="1.333" step="0.001">
                </div>

                <hr style="margin: 2rem 0; border: 0; border-top: 1px solid var(--border);">

                <h3 style="margin-bottom: 1rem;">Gaps</h3>

                <div class="form-group">
                    <label>Base Size Min (rem)</label>
                    <input type="number" id="gapBaseMin" value="0.75" step="0.1">
                </div>

                <div class="form-group">
                    <label>Base Size Max (rem)</label>
                    <input type="number" id="gapBaseMax" value="1.5" step="0.1">
                </div>

                <div class="form-group">
                    <label>Ratio</label>
                    <input type="number" id="gapRatio" value="1.333" step="0.001">
                </div>

                <div class="button-group">
                    <button class="btn-primary" id="generateBtn">Generate All Tokens</button>
                    <button class="btn-secondary" id="resetBtn">Reset Defaults</button>
                </div>
            </div>

            <div class="card">
                <h2>Preview</h2>
                <div id="previewContainer">
                    <p style="color: var(--text-secondary);">Click "Generate All Tokens" to see preview</p>
                </div>
            </div>
        </div>

        <div class="output-section">
            <div class="output-grid">
                <div class="output-card">
                    <h3>
                        Typography CSS
                        <button class="copy-btn" id="copyTypography">Copy</button>
                    </h3>
                    <pre><code id="typographyOutput">/* Click Generate to see output */</code></pre>
                </div>

                <div class="output-card">
                    <h3>
                        Spacing CSS
                        <button class="copy-btn" id="copySpacing">Copy</button>
                    </h3>
                    <pre><code id="spacingOutput">/* Click Generate to see output */</code></pre>
                </div>

                <div class="output-card">
                    <h3>
                        Gap CSS
                        <button class="copy-btn" id="copyGap">Copy</button>
                    </h3>
                    <pre><code id="gapOutput">/* Click Generate to see output */</code></pre>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Token Generator Class
        class TokenGenerator {
            generateTypography(config) {
                const tokens = [
                    'body-xs', 'body-s', 'body-m', 'body-l', 'body-xl',
                    'title-6', 'title-5', 'title-4', 'title-3', 'title-2', 'title-1'
                ];
                
                const powers = [-2, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8];
                
                const minValues = tokens.map((token, i) => 
                    config.typeBaseMin * Math.pow(config.typeRatioMobile, powers[i])
                );
                
                const maxValues = tokens.map((token, i) => 
                    config.typeBaseMax * Math.pow(config.typeRatioDesktop, powers[i])
                );
                
                return this.generateClampCSS(tokens, minValues, maxValues, config.viewportMin, config.viewportMax);
            }

            generateSpacing(config) {
                const tokens = ['space-xs', 'space-s', 'space-m', 'space-l', 'space-xl'];
                const powers = [-1, 0, 1, 2, 3];
                
                const minValues = tokens.map((token, i) => 
                    config.spaceBaseMin * Math.pow(config.spaceRatio, powers[i])
                );
                
                const maxValues = tokens.map((token, i) => 
                    config.spaceBaseMax * Math.pow(config.spaceRatio, powers[i])
                );
                
                return this.generateClampCSS(tokens, minValues, maxValues, config.viewportMin, config.viewportMax);
            }

            generateGaps(config) {
                const tokens = ['gap-xs', 'gap-s', 'gap-m', 'gap-l', 'gap-xl'];
                const powers = [-1, 0, 1, 2, 3];
                
                const minValues = tokens.map((token, i) => 
                    config.gapBaseMin * Math.pow(config.gapRatio, powers[i])
                );
                
                const maxValues = tokens.map((token, i) => 
                    config.gapBaseMax * Math.pow(config.gapRatio, powers[i])
                );
                
                return this.generateClampCSS(tokens, minValues, maxValues, config.viewportMin, config.viewportMax);
            }

            generateClampCSS(tokens, minValues, maxValues, viewportMin, viewportMax) {
                let css = ':root {\n';
                
                tokens.forEach((token, i) => {
                    const min = minValues[i];
                    const max = maxValues[i];
                    const slope = (max - min) / (viewportMax - viewportMin);
                    const intercept = min - slope * viewportMin;
                    
                    const minRem = min.toFixed(3);
                    const maxRem = max.toFixed(3);
                    const vwValue = (slope * 100).toFixed(3);
                    const interceptRem = intercept.toFixed(3);
                    
                    css += `    --${token}: clamp(${minRem}rem, ${vwValue}vw + ${interceptRem}rem, ${maxRem}rem);\n`;
                });
                
                css += '}';
                return css;
            }
        }

        // UI Controller
        class DashboardUI {
            constructor() {
                this.generator = new TokenGenerator();
                this.initElements();
                this.loadSavedValues();
                this.attachEventListeners();
                this.initDarkMode();
            }

            initElements() {
                this.elements = {
                    viewportMin: document.getElementById('viewportMin'),
                    viewportMax: document.getElementById('viewportMax'),
                    typeBaseMin: document.getElementById('typeBaseMin'),
                    typeBaseMax: document.getElementById('typeBaseMax'),
                    typeRatioMobile: document.getElementById('typeRatioMobile'),
                    typeRatioDesktop: document.getElementById('typeRatioDesktop'),
                    spaceBaseMin: document.getElementById('spaceBaseMin'),
                    spaceBaseMax: document.getElementById('spaceBaseMax'),
                    spaceRatio: document.getElementById('spaceRatio'),
                    gapBaseMin: document.getElementById('gapBaseMin'),
                    gapBaseMax: document.getElementById('gapBaseMax'),
                    gapRatio: document.getElementById('gapRatio'),
                    generateBtn: document.getElementById('generateBtn'),
                    resetBtn: document.getElementById('resetBtn'),
                    typographyOutput: document.getElementById('typographyOutput'),
                    spacingOutput: document.getElementById('spacingOutput'),
                    gapOutput: document.getElementById('gapOutput'),
                    previewContainer: document.getElementById('previewContainer'),
                    copyTypography: document.getElementById('copyTypography'),
                    copySpacing: document.getElementById('copySpacing'),
                    copyGap: document.getElementById('copyGap'),
                    darkModeToggle: document.getElementById('darkModeToggle')
                };
            }

            attachEventListeners() {
                this.elements.generateBtn.addEventListener('click', () => this.generate());
                this.elements.resetBtn.addEventListener('click', () => this.reset());
                this.elements.copyTypography.addEventListener('click', () => this.copy('typography'));
                this.elements.copySpacing.addEventListener('click', () => this.copy('spacing'));
                this.elements.copyGap.addEventListener('click', () => this.copy('gap'));
            }

            generate() {
                const config = {
                    viewportMin: parseFloat(this.elements.viewportMin.value),
                    viewportMax: parseFloat(this.elements.viewportMax.value),
                    typeBaseMin: parseFloat(this.elements.typeBaseMin.value),
                    typeBaseMax: parseFloat(this.elements.typeBaseMax.value),
                    typeRatioMobile: parseFloat(this.elements.typeRatioMobile.value),
                    typeRatioDesktop: parseFloat(this.elements.typeRatioDesktop.value),
                    spaceBaseMin: parseFloat(this.elements.spaceBaseMin.value),
                    spaceBaseMax: parseFloat(this.elements.spaceBaseMax.value),
                    spaceRatio: parseFloat(this.elements.spaceRatio.value),
                    gapBaseMin: parseFloat(this.elements.gapBaseMin.value),
                    gapBaseMax: parseFloat(this.elements.gapBaseMax.value),
                    gapRatio: parseFloat(this.elements.gapRatio.value)
                };

                // Generate all tokens
                const typography = this.generator.generateTypography(config);
                const spacing = this.generator.generateSpacing(config);
                const gaps = this.generator.generateGaps(config);

                // Update outputs
                this.elements.typographyOutput.textContent = typography;
                this.elements.spacingOutput.textContent = spacing;
                this.elements.gapOutput.textContent = gaps;

                // Update preview
                this.updatePreview(config);

                // Save to localStorage
                this.saveValues(config);
            }

            updatePreview(config) {
                let html = '<h3>Typography Preview</h3>';
                const typographyTokens = ['body-xs', 'body-s', 'body-m', 'body-l', 'body-xl', 'title-6', 'title-5', 'title-4', 'title-3', 'title-2', 'title-1'];
                typographyTokens.forEach(token => {
                    html += `<div class="preview-item" style="font-size: var(--${token});">${token}</div>`;
                });

                html += '<h3 style="margin-top: 2rem;">Spacing Preview</h3>';
                const spacingTokens = ['space-xs', 'space-s', 'space-m', 'space-l', 'space-xl'];
                spacingTokens.forEach(token => {
                    html += `<div class="preview-item" style="padding: var(--${token}); background: var(--accent); color: white; margin-bottom: 0.5rem;">${token}</div>`;
                });

                html += '<h3 style="margin-top: 2rem;">Gap Preview</h3>';
                html += '<div style="display: flex; flex-direction: column; gap: var(--gap-xs);">';
                const gapTokens = ['gap-xs', 'gap-s', 'gap-m', 'gap-l', 'gap-xl'];
                gapTokens.forEach(token => {
                    html += `<div class="preview-item" style="background: var(--success); color: white;">${token}</div>`;
                });
                html += '</div>';

                this.elements.previewContainer.innerHTML = html;

                // Apply generated CSS to preview
                const style = document.createElement('style');
                style.textContent = `
                    ${this.generator.generateTypography(config)}
                    ${this.generator.generateSpacing(config)}
                    ${this.generator.generateGaps(config)}
                `;
                document.head.appendChild(style);
            }

            copy(type) {
                let text;
                if (type === 'typography') text = this.elements.typographyOutput.textContent;
                if (type === 'spacing') text = this.elements.spacingOutput.textContent;
                if (type === 'gap') text = this.elements.gapOutput.textContent;

                navigator.clipboard.writeText(text).then(() => {
                    const btn = type === 'typography' ? this.elements.copyTypography :
                                type === 'spacing' ? this.elements.copySpacing :
                                this.elements.copyGap;
                    btn.textContent = 'Copied!';
                    setTimeout(() => btn.textContent = 'Copy', 2000);
                });
            }

            reset() {
                const defaults = {
                    viewportMin: 320,
                    viewportMax: 1440,
                    typeBaseMin: 1.4,
                    typeBaseMax: 1.6,
                    typeRatioMobile: 1.125,
                    typeRatioDesktop: 1.2,
                    spaceBaseMin: 0.5,
                    spaceBaseMax: 1.0,
                    spaceRatio: 1.333,
                    gapBaseMin: 0.75,
                    gapBaseMax: 1.5,
                    gapRatio: 1.333
                };

                Object.keys(defaults).forEach(key => {
                    if (this.elements[key]) {
                        this.elements[key].value = defaults[key];
                    }
                });

                localStorage.removeItem('tokenConfig');
                this.generate();
            }

            saveValues(config) {
                localStorage.setItem('tokenConfig', JSON.stringify(config));
            }

            loadSavedValues() {
                const saved = localStorage.getItem('tokenConfig');
                if (saved) {
                    const config = JSON.parse(saved);
                    Object.keys(config).forEach(key => {
                        if (this.elements[key]) {
                            this.elements[key].value = config[key];
                        }
                    });
                    this.generate();
                }
            }

            initDarkMode() {
                const isDark = localStorage.getItem('darkMode') === 'true';
                if (isDark) {
                    document.body.classList.add('dark-mode');
                }

                this.elements.darkModeToggle.addEventListener('click', () => {
                    document.body.classList.toggle('dark-mode');
                    localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
                });
            }
        }

        // Initialize
        const dashboard = new DashboardUI();
    </script>
</body>
</html>